<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Matching</title>
    <!-- Reference your external JavaScript file here -->
    <script src="script.js"></script>
</head>
<body>
    <h1>JSON Matching Tool</h1>

    <div>
        <label for="file1">File 1:</label>
        <textarea id="file1" placeholder="Paste your JSON here" rows="10" cols="50"></textarea>
    </div>

    <div>
        <label for="file2">File 2:</label>
        <textarea id="file2" placeholder="Paste your JSON here" rows="10" cols="50"></textarea>
    </div>

    <!-- Update the onclick to call matchJson -->
    <button onclick="matchJson()">Match JSON</button>

    <h2>Matches:</h2>
    <!-- Display matches as a table -->
    <table id="matches">
        <thead>
            <tr>
                <th>Name</th>
                <th>RelatedID</th>
                <th>TargetID</th>
                <th>ID</th>
            </tr>
        </thead>
        <tbody id="matchesBody"></tbody>
    </table>

    <!-- The rest of your JavaScript code can remain in the HTML file -->
    <script>
        // Your existing JavaScript code
// script.js
function matchJson() {
    const file1Input = document.getElementById('file1');
    const file2Input = document.getElementById('file2');

    // Check if textareas are not empty
    if (!file1Input.value.trim() || !file2Input.value.trim()) {
        alert('Please paste JSON into both boxes');
        return;
    }

    const file1Data = JSON.parse(file1Input.value);
    const file2Data = JSON.parse(file2Input.value);

    // Perform matching logic
    matchAndDisplay(file1Data, file2Data);
}

function matchAndDisplay(file1Data, file2Data) {
    // Your existing matching and display logic
    const matches = [];

    for (const entry2 of file2Data) {
        if (entry2.body && entry2.body.targetId) {
            const targetId = entry2.body.targetId;
            const matchingEntry = file1Data.find(entry1 => entry1.id === targetId);

            if (matchingEntry) {
                const name = matchingEntry.name || 'N/A';
                matches.push({
                    Name: name,
                    RelatedID: entry2.relatedId || 'N/A',
                    TargetID: targetId,
                    ID: entry2.id || 'N/A'
                });
            }
        }
    }

    // Display matches as a table
    displayMatches(matches);
}

function displayMatches(matches) {
    const matchesBody = document.getElementById('matchesBody');
    matchesBody.innerHTML = '';

    if (matches.length === 0) {
        const noMatchesRow = document.createElement('tr');
        const noMatchesCell = document.createElement('td');
        noMatchesCell.textContent = 'No matches found.';
        noMatchesCell.colSpan = 4; // Span across all columns
        noMatchesRow.appendChild(noMatchesCell);
        matchesBody.appendChild(noMatchesRow);
    } else {
        matches.forEach(match => {
            const row = document.createElement('tr');
            const nameCell = document.createElement('td');
            nameCell.textContent = match.Name;
            const relatedIdCell = document.createElement('td');
            relatedIdCell.textContent = match.RelatedID;
            const targetIdCell = document.createElement('td');
            targetIdCell.textContent = match.TargetID;
            const idCell = document.createElement('td');
            idCell.textContent = match.ID;

            row.appendChild(nameCell);
            row.appendChild(relatedIdCell);
            row.appendChild(targetIdCell);
            row.appendChild(idCell);

            matchesBody.appendChild(row);
        });
    }
}
    </script>
</body>
</html>
